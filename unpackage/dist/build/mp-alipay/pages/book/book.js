(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/book/book"],{4223:function(o,t,e){"use strict";e.r(t);var n=e("4e35"),i=e("4596");for(var a in i)"default"!==a&&function(o){e.d(t,o,function(){return i[o]})}(a);e("a796");var s=e("2877"),u=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,"6d9362f8",null);t["default"]=u.exports},4596:function(o,t,e){"use strict";e.r(t);var n=e("70e8"),i=e.n(n);for(var a in n)"default"!==a&&function(o){e.d(t,o,function(){return n[o]})}(a);t["default"]=i.a},"4e35":function(o,t,e){"use strict";var n=function(){var o=this,t=o.$createElement,e=(o._self._c,o.wordsCount(o.book.word_count));o.$mp.data=Object.assign({},{$root:{m0:e}})},i=[];e.d(t,"a",function(){return n}),e.d(t,"b",function(){return i})},"70e8":function(o,t,e){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(e("d40c"));function i(o){return o&&o.__esModule?o:{default:o}}var a={data:function(){return{userId:"",bookId:"",book:"",likelist:[],openStatusBtn:!1,isBookShelf:!1}},onLoad:function(t){this.userId=o.getStorageSync("__userid__")||"",this.bookId=t.id,this.getBookData(this.bookId),this.getLikeBookData(this.bookId)},onShow:function(){this.getIsBookShelf()},onReady:function(){},methods:{wordsCount:function(o){return o>1e4?Math.round(o/1e4)+"万字":o+"字"},openAndCloseBtn:function(){this.openStatusBtn=!this.openStatusBtn},addBookShelf:function(){var t=this;if(this.userId){var e={user_id:this.userId,book_id:this.bookId};n.default.post("/user/addUserCase",e).then(function(o){200===o.code?t.isBookShelf=!0:t.isBookShelf=!1})}else o.showToast({title:"请先登录",icon:"none",duration:2e3})},deleteBookShelf:function(){var o=this,t={user_id:this.userId,book_id:this.bookId};n.default.post("/user/deleteUserCase",t).then(function(t){t.code,o.isBookShelf=!1})},getIsBookShelf:function(){var o=this,t={user_id:this.userId,book_id:this.bookId};n.default.post("/book/bookIsCase",t).then(function(t){if(200===t.code){var e="Y"===t.data.is_case;o.isBookShelf=e}})},gotoRead:function(){o.setStorageSync("__bookid__",this.bookId),o.setStorageSync("__sectionid__",0),o.navigateTo({url:"../read/read"})},getBookData:function(t){var e=this;n.default.post("/book/detail",{book_id:t}).then(function(t){200===t.code&&(e.book=t.data,o.setNavigationBarTitle({title:t.data.book_title}))})},getLikeBookData:function(o){var t=this,e={book_id:o,page:1,limit:6};n.default.post("/book/likeBook",e).then(function(o){200===o.code&&(t.likelist=o.data)})}}};t.default=a}).call(this,e("c11b")["default"])},a796:function(o,t,e){"use strict";var n=e("b73f"),i=e.n(n);i.a},b73f:function(o,t,e){}},[["f922","common/runtime","common/vendor"]]]);