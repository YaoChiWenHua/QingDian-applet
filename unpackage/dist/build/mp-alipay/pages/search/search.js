(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/search/search"],{"0aaf":function(t,e,n){"use strict";n.r(e);var i=n("0e13"),a=n("5435");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("4e74");var r=n("2877"),s=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"274e117a",null);e["default"]=s.exports},"0e13":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.resultlist,function(e,n){var i=t.wordsCount(e.word_count);return{$orig:t.__get_orig(e),m0:i}}));t.$mp.data=Object.assign({},{$root:{l0:n}})},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"4e74":function(t,e,n){"use strict";var i=n("fee3"),a=n.n(i);a.a},5435:function(t,e,n){"use strict";n.r(e);var i=n("5718"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},5718:function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n("d40c")),o=n("456b");function r(t){return t&&t.__esModule?t:{default:t}}var s="__search__",u=6,c={data:function(){return{query:"",scrollHeight:0,hotlist:[],resultlist:[],page:1,limit:10,count:"",loading:!0,historylist:[]}},onLoad:function(){var e=this;this.historylist=t.getStorageSync(s)||[],this.getHotListData(1),this.$watch("query",(0,o.debounce)(function(t){t&&(e.resultlist=[],e.page=1,e.getResultListData())},200))},onReady:function(){var t=i.getSystemInfoSync().windowHeight;this.scrollHeight=2*(t-65)},onShow:function(){},methods:{wordsCount:function(t){return t>1e4?Math.round(t/1e4)+"万字":t+"字"},clearQuery:function(){this.query="",this.resultlist=[],this.page=1},exchangeFuncBtn:function(){var t=Math.floor(89*Math.random()+1);this.getHotListData(t)},queryHotBtn:function(t){this.query=t.currentTarget.dataset.title,this.getResultListData()},scrollMoreList:function(){var t=this.resultlist.length;t>=this.count?this.loading=!1:(this.page++,this.getResultListData())},selectItem:function(e){var n=this,i=e.currentTarget.dataset.item;t.navigateTo({url:"../book/book?id=".concat(i.book_id),success:function(){n.saveSearch(n.query)}})},saveSearch:function(e){var n=this.historylist;(0,o.insertArray)(n,e,function(t){return t===e},u),t.setStorageSync(s,n),this.historylist=n},clearHistoryBtn:function(){t.removeStorageSync(s),this.historylist=[]},getHotListData:function(t){var e=this;a.default.get("/index/searchHot",{page:t}).then(function(t){200===t.code&&(e.hotlist=t.data)})},getResultListData:function(){var t=this,e={keywords:this.query,page:this.page,limit:this.limit};a.default.post("/index/searchResult",e).then(function(e){if(200===e.code){var n=!0,i=t.resultlist;i=i.concat(e.data),n=!(e.extra.count<t.limit),t.resultlist=i,t.count=e.extra.count,t.loading=n}else 1===t.page&&(t.resultlist=[],t.count=0,t.loading=!1)})}}};e.default=c}).call(this,n("c11b")["default"],n("c11b")["default"])},fee3:function(t,e,n){}},[["2b80","common/runtime","common/vendor"]]]);