(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/read/read"],{"4c5c":function(t,e,o){"use strict";o.r(e);var i=o("cdb2"),n=o.n(i);for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);e["default"]=n.a},5906:function(t,e,o){"use strict";o.r(e);var i=o("c62d"),n=o("4c5c");for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);o("e67b");var s=o("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"41df3ea0",null);e["default"]=r.exports},c62d:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},n=[];o.d(e,"a",function(){return i}),o.d(e,"b",function(){return n})},cdb2:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(o("d40c")),n=s(o("a4c2")),a=o("2f62");function s(t){return t&&t.__esModule?t:{default:t}}function r(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},i=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),i.forEach(function(e){c(t,e,o[e])})}return t}function c(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var u={data:function(){return{userId:"",bookId:"",sectionId:"",book:{},showSet:!1,scrollHeight:0,cataloguelist:[],showCataMenu:!1,nightMode:!1,setFontSize:!0,fontSize:30,page:1,total:"",pickerlist:[],pickerIndex:0,preSectionId:"",isDisablePre:!1,nextSectionId:"",isDisableNext:!1,isBookShelf:!0}},onLoad:function(){this.bookId=t.getStorageSync("__bookid__"),this.sectionId=t.getStorageSync("__sectionid__")||0,this.getReadBookData(this.sectionId),this.getBookDirectoryData()},onReady:function(){var e=t.getSystemInfoSync().windowHeight,o=e-60-49;this.scrollHeight=2*o,console.log(this.scrollHeight)},onShow:function(){""===this.userId&&(this.userId=this.userid?this.userid:t.getStorageSync("__userid__")),this.getIsBookShelf()},computed:r({},(0,a.mapState)(["userid"])),methods:{setShowBtn:function(){this.showSet=!this.showSet},nigthModeBtn:function(){this.nightMode?t.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#F5EEE9",animation:{}}):t.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#292929",animation:{}}),this.nightMode=!this.nightMode,this.showSet=!1},showCataMenuBtn:function(){this.showCataMenu=!this.showCataMenu,this.showSet=!1},fontSizeBtn:function(){this.setFontSize=!this.setFontSize},subFontSizeBtn:function(){var t=this.fontSize;t<=20||(t-=4,this.fontSize=t)},addFontSizeBtn:function(){var t=this.fontSize;t>=98||(t+=4,this.fontSize=t)},addBookShelf:function(){var e=this;if(this.userId){var o={user_id:this.userId,book_id:this.bookId};i.default.post("/user/addUserCase",o).then(function(o){200===o.code?(t.showToast({title:"加入书架成功",duration:2e3}),e.isBookShelf=!1):(t.showToast({title:"加入书架失败",icon:"none",duration:2e3}),e.isBookShelf=!0)})}else t.showToast({title:"请先登录",icon:"none",duration:2e3})},gotoBookDetails:function(){t.navigateTo({url:"../book/book?id=".concat(this.bookId)})},selectCatalogue:function(t){var e=t.currentTarget.dataset.item.chapter_id;this.showCataMenu=!1,this.showSet=!1,this.getReadBookData(e)},changePickerValue:function(t){var e=parseInt(t.detail.value);this.pickerIndex=e,this.page=e+1,this.getBookDirectoryData()},preChapter:function(){this.getReadBookData(this.preSectionId)},nextChapter:function(){this.getReadBookData(this.nextSectionId)},returnBtn:function(){},getIsBookShelf:function(){var t=this,e={user_id:this.userId,book_id:this.bookId};i.default.post("/book/bookIsCase",e).then(function(e){if(200===e.code){var o="Y"!==e.data.is_case;t.isBookShelf=o}})},getReadBookData:function(e){var o=this,a={book_id:this.bookId,user_id:this.userId,chapter_id:e};i.default.post("/book/read",a).then(function(e){if(t.pageScrollTo({scrollTop:0,duration:0}),200===e.code){var i=e.data,a=e.extra;i.content=(0,n.default)(i.content),t.setStorageSync("__sectionid__",i.chapter_id),t.setNavigationBarTitle({title:i.chapter_title}),o.book=i,o.sectionId=i.chapter_id,o.preSectionId=a.pre,o.nextSectionId=a.next,0===a.pre?o.isDisablePre=!0:o.isDisablePre=!1,0===a.next?o.isDisableNext=!0:o.isDisableNext=!1}})},getBookDirectoryData:function(){var t=this,e={book_id:this.bookId,page:this.page,limit:100};i.default.post("/book/directory",e).then(function(e){200===e.code&&(t.cataloguelist=e.data,t.total=e.extra.count,0===t.pickerlist.length&&t.setPickerData(e.extra.count))})},setPickerData:function(t){for(var e=[],o=Math.floor(t/100),i=0;i<=o;i++){var n=100*i+1,a=100*(i+1);a>t&&(a=t);var s=n+"-"+a;e.push(s)}this.pickerlist=e}}};e.default=u}).call(this,o("c11b")["default"])},d043:function(t,e,o){},e67b:function(t,e,o){"use strict";var i=o("d043"),n=o.n(i);n.a}},[["69d7","common/runtime","common/vendor"]]]);