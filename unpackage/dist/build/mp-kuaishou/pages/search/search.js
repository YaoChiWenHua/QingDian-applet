(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/search/search"],{"06ae":function(t,e,n){"use strict";n.r(e);var r=n("d9fb"),a=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=a.a},"0cb0":function(t,e,n){},5401:function(t,e,n){"use strict";var r=n("0cb0"),a=n.n(r);a.a},"78e0":function(t,e,n){"use strict";(function(t,e){n("eab3");a(n("66fd"));var r=a(n("c612"));function a(t){return t&&t.__esModule?t:{default:t}}t.__webpack_require_UNI_MP_PLUGIN__=n,e(r.default)}).call(this,n("c5f9")["default"],n("c5f9")["createPage"])},"970a":function(t,e,n){"use strict";var r;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return r}));var a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.resultlist,(function(e,n){var r=t.__get_orig(e),a=t.wordsCount(e.word_count);return{$orig:r,m0:a}})));t.$mp.data=Object.assign({},{$root:{l0:n}})},i=[]},c612:function(t,e,n){"use strict";n.r(e);var r=n("970a"),a=n("06ae");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("5401");var o,u=n("f0c5"),c=Object(u["a"])(a["default"],r["b"],r["c"],!1,null,"a79cbac4",null,!1,r["a"],o);e["default"]=c.exports},d9fb:function(t,e,n){"use strict";(function(t,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=u(n("a34a")),i=n("a838"),o=n("b686");function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,r,a,i,o){try{var u=t[i](o),c=u.value}catch(s){return void n(s)}u.done?e(c):Promise.resolve(c).then(r,a)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){c(i,r,a,o,u,"next",t)}function u(t){c(i,r,a,o,u,"throw",t)}o(void 0)}))}}var l="__search__",f=6,d={data:function(){return{base:i.coverUrl,query:"",scrollHeight:0,hotlist:[],resultlist:[],page:1,limit:10,count:"",loading:!0,historylist:[]}},onLoad:function(){var e=this;this.historylist=t.getStorageSync(l)||[],this.getHotListData(1),this.$watch("query",(0,o.debounce)((function(t){t&&(e.resultlist=[],e.page=1,e.getResultListData())}),200))},onReady:function(){var t=r.getSystemInfoSync().windowHeight;this.scrollHeight=2*(t-65)},onShow:function(){},methods:{wordsCount:function(t){return t>1e4?Math.round(t/1e4)+"万字":t+"字"},clearQuery:function(){this.query="",this.resultlist=[],this.page=1},exchangeFuncBtn:function(){var t=Math.floor(89*Math.random()+1);this.getHotListData(t)},queryHotBtn:function(t){this.query=t},scrollMoreList:function(){var t=this.resultlist.length;t>=this.count?this.loading=!1:(this.page++,this.getResultListData())},selectItem:function(e){var n=this;t.navigateTo({url:"../detail/detail?id=".concat(e.book_id),success:function(){n.saveSearch(n.query)}})},saveSearch:function(e){var n=this.historylist;(0,o.insertArray)(n,e,(function(t){return t===e}),f),t.setStorageSync(l,n),this.historylist=n},clearHistoryBtn:function(){t.removeStorageSync(l),this.historylist=[]},getHotListData:function(t){var e=this;return s(a.default.mark((function n(){var r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$api.home.SearchHot({page:t});case 2:r=n.sent,200===r.code&&(e.hotlist=r.data);case 4:case"end":return n.stop()}}),n)})))()},getResultListData:function(){var t=this;return s(a.default.mark((function e(){var n,r,i,o;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={keywords:t.query,page:t.page,rows:t.limit},e.next=3,t.$api.home.SearchResult(n);case 3:r=e.sent,200===r.code?(i=!0,o=t.resultlist,o=o.concat(r.data),i=!(r.extra.count<t.limit),t.resultlist=o,t.count=r.extra.count,t.loading=i):1===t.page&&(t.resultlist=[],t.count=0,t.loading=!1);case 5:case"end":return e.stop()}}),e)})))()}}};e.default=d}).call(this,n("c5f9")["default"],n("c5f9")["default"])}},[["78e0","common/runtime","common/vendor"]]]);