(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/search/search"],{"20af":function(t,e,n){"use strict";n.r(e);var i=n("e420"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=r.a},"2ff6":function(t,e,n){},"422c":function(t,e,n){"use strict";var i,r=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.resultlist,function(e,n){var i=t.wordsCount(e.word_count);return{$orig:t.__get_orig(e),m0:i}}));t.$mp.data=Object.assign({},{$root:{l0:n}})},a=[];n.d(e,"b",function(){return r}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return i})},"658e":function(t,e,n){"use strict";n.r(e);var i=n("422c"),r=n("20af");for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);n("9f6d");var s,o=n("f0c5"),u=Object(o["a"])(r["default"],i["b"],i["c"],!1,null,"639ad904",null,!1,i["a"],s);e["default"]=u.exports},"9d9d":function(t,e,n){"use strict";(function(t){n("7e18"),n("921b");i(n("66fd"));var e=i(n("658e"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("f266")["createPage"])},"9f6d":function(t,e,n){"use strict";var i=n("2ff6"),r=n.n(i);r.a},e420:function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n("a34a")),a=n("a3c5"),s=n("62cd");function o(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,i,r,a,s){try{var o=t[a](s),u=o.value}catch(c){return void n(c)}o.done?e(u):Promise.resolve(u).then(i,r)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function s(t){u(a,i,r,s,o,"next",t)}function o(t){u(a,i,r,s,o,"throw",t)}s(void 0)})}}var l="__search__",f=6,h={data:function(){return{base:a.coverUrl,query:"",scrollHeight:0,hotlist:[],resultlist:[],page:1,limit:10,count:"",loading:!0,historylist:[]}},onLoad:function(){var e=this;this.historylist=t.getStorageSync(l)||[],this.getHotListData(1),this.$watch("query",(0,s.debounce)(function(t){t&&(e.resultlist=[],e.page=1,e.getResultListData())},200))},onReady:function(){var t=i.getSystemInfoSync().windowHeight;this.scrollHeight=2*(t-65)},onShow:function(){},methods:{wordsCount:function(t){return t>1e4?Math.round(t/1e4)+"万字":t+"字"},clearQuery:function(){this.query="",this.resultlist=[],this.page=1},exchangeFuncBtn:function(){var t=Math.floor(89*Math.random()+1);this.getHotListData(t)},queryHotBtn:function(t){this.query=t},scrollMoreList:function(){var t=this.resultlist.length;t>=this.count?this.loading=!1:(this.page++,this.getResultListData())},selectItem:function(e){var n=this;t.navigateTo({url:"../detail/detail?id=".concat(e.book_id),success:function(){n.saveSearch(n.query)}})},saveSearch:function(e){var n=this.historylist;(0,s.insertArray)(n,e,function(t){return t===e},f),t.setStorageSync(l,n),this.historylist=n},clearHistoryBtn:function(){t.removeStorageSync(l),this.historylist=[]},getHotListData:function(){var t=c(r.default.mark(function t(e){var n;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.home.SearchHot({page:e});case 2:n=t.sent,200===n.code&&(this.hotlist=n.data);case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getResultListData:function(){var t=c(r.default.mark(function t(){var e,n,i,a;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={keywords:this.query,page:this.page,rows:this.limit},t.next=3,this.$api.home.SearchResult(e);case 3:n=t.sent,200===n.code?(i=!0,a=this.resultlist,a=a.concat(n.data),i=!(n.extra.count<this.limit),this.resultlist=a,this.count=n.extra.count,this.loading=i):1===this.page&&(this.resultlist=[],this.count=0,this.loading=!1);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}};e.default=h}).call(this,n("f266")["default"],n("f266")["default"])}},[["9d9d","common/runtime","common/vendor"]]]);