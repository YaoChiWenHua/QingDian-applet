(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/bookshelf/bookshelf"],{"1c0c":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("a34a")),c=n("a3c5"),i=n("2f62");function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,o,c,i,a){try{var s=t[i](a),r=s.value}catch(l){return void n(l)}s.done?e(r):Promise.resolve(r).then(o,c)}function r(t){return function(){var e=this,n=arguments;return new Promise(function(o,c){var i=t.apply(e,n);function a(t){s(i,o,c,a,r,"next",t)}function r(t){s(i,o,c,a,r,"throw",t)}a(void 0)})}}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){u(t,e,n[e])})}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={data:function(){return{base:c.coverUrl,channel:"",tabName:"sc",collectlist:[],cPage:1,cTotal:null,collectLoad:!0,selectColl:!1,collectBookId:"",readlist:[],rPage:1,rTotal:null,readLoad:!0,selectRead:!1,readBookId:""}},onLoad:function(e){this.channel=t.getStorageSync("channel")||"man",this.tabName=e.id||"sc",this._initCollect(),this._initRead()},onReady:function(){},onShow:function(){},onReachBottom:function(){"sc"===this.tabName?this.collectMoreList():this.readMoreList()},computed:l({},(0,i.mapGetters)(["userId"])),methods:{_initCollect:function(){var t=r(o.default.mark(function t(){var e,n,c,i;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={channel:this.channel,user_id:this.userId,page:this.cPage},t.next=3,this.$api.bookshelf.BookCaseList(e);case 3:n=t.sent,200===n.code?(c=n.data,i=n.extra,i.count<i.rows&&(this.collectLoad=!1),c.forEach(function(t,e){t.checked=!1}),this.cTotal=i.count,this.collectlist=this.collectlist.concat(c)):this.collectLoad=!1;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),_initRead:function(){var t=r(o.default.mark(function t(){var e,n,c,i;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={channel:this.channel,user_id:this.userId,page:this.rPage,rows:20},t.next=3,this.$api.user.ReadBookList(e);case 3:n=t.sent,200===n.code?(c=n.data,i=n.extra,i.count<i.rows&&(this.readLoad=!1),c.forEach(function(t,e){t.checked=!1}),this.rTotal=i.count,this.readlist=this.readlist.concat(c)):this.readLoad=!1;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),collectMoreList:function(){var t=this.collectlist.length;t>=this.cTotal?this.collectLoad=!1:(this.cPage++,this._initCollect())},readMoreList:function(){var t=this.readlist.length;t>=this.rTotal?this.readLoad=!1:(this.rPage++,this._initRead())},deleteCollect:function(){var e=r(o.default.mark(function e(){var n,c,i=this;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.collectlist.forEach(function(t,e){t.checked&&(i.collectBookId+=t.book_id+",")}),this.collectBookId=this.collectBookId.slice(0,-1),console.log(this.collectBookId),!this.collectBookId){e.next=11;break}return n={user_id:this.userId,book_id:this.collectBookId},e.next=7,this.$api.bookshelf.DeleteUserCase(n);case 7:c=e.sent,200===c.code?(this.collectBookId="",this.collectLoad=!0,this.cPage=1,this.collectlist=[],this._initCollect()):t.showToast({icon:"none",title:c.msg}),e.next=12;break;case 11:t.showToast({icon:"none",title:"请选择需要删除的书籍！"});case 12:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),deleteRead:function(){var e=r(o.default.mark(function e(){var n,c,i=this;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.readlist.forEach(function(t,e){t.checked&&(i.readBookId+=t.book_id+",")}),this.readBookId=this.readBookId.slice(0,-1),console.log(this.readBookId),!this.readBookId){e.next=11;break}return n={user_id:this.userId,book_id:this.readBookId},e.next=7,this.$api.user.DeleteUserRead(n);case 7:c=e.sent,200===c.code?(this.readBookId="",this.readLoad=!0,this.rPage=1,this.readlist=[],this._initRead()):t.showToast({icon:"none",title:c.msg}),e.next=12;break;case 11:t.showToast({icon:"none",title:"请选择需要删除的书籍！"});case 12:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),gotoRead:function(e,n){t.navigateTo({url:"../read/read?bId=".concat(e,"&cId=").concat(n)})},handleChecked:function(t){t.checked=!t.checked},selectCollShow:function(){this.selectColl=!this.selectColl},selectCollHide:function(){this.selectColl=!1},selectReadShow:function(){this.selectRead=!this.selectRead},selectReadHide:function(){this.selectRead=!1},handleTabNav:function(t){this.tabName=t}}};e.default=d}).call(this,n("f266")["default"])},"326f":function(t,e,n){"use strict";var o,c=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",function(){return c}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o})},4291:function(t,e,n){"use strict";var o=n("5ec0"),c=n.n(o);c.a},"5ec0":function(t,e,n){},b984:function(t,e,n){"use strict";n.r(e);var o=n("1c0c"),c=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=c.a},dcd5:function(t,e,n){"use strict";n.r(e);var o=n("326f"),c=n("b984");for(var i in c)"default"!==i&&function(t){n.d(e,t,function(){return c[t]})}(i);n("4291");var a,s=n("f0c5"),r=Object(s["a"])(c["default"],o["b"],o["c"],!1,null,"d86b92d6",null,!1,o["a"],a);e["default"]=r.exports},f3ce:function(t,e,n){"use strict";(function(t){n("7e18"),n("921b");o(n("66fd"));var e=o(n("dcd5"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("f266")["createPage"])}},[["f3ce","common/runtime","common/vendor"]]]);